<!-- <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Page</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to right, #9575cd, #ff5252);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .login-container {
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    width: 300px;
  }

  .login-container h2 {
    text-align: center;
    margin-bottom: 2rem;
  }

  .input-group {
    margin-bottom: 1rem;
  }

  .input-group label {
    display: block;
    margin-bottom: .5rem;
  }

  .input-group input {
    width: 100%;
    padding: .5rem;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

  .actions {
    margin-top: 1rem;
  }

  .actions button {
    width: 100%;
    padding: .7rem;
    border: none;
    background: #9575cd;
    color: white;
    border-radius: 5px;
    cursor: pointer;
  }

  .actions button:hover {
    background: #7e57c2;
  }

  .actions .remember-me {
    display: flex;
    align-items: center;
    margin-bottom: .5rem;
  }

  .actions input[type="checkbox"] {
    margin-right: .5rem;
  }

  .actions a {
    display: block;
    text-align: center;
    margin-top: 1rem;
  }
</style>
</head>
<body>

<div class="login-container">
  <div class="avatar">
    <img src="path/to/your/avatar.png" alt="Avatar">
  </div>
  <div class="input-group">
    <label for="email">Email ID</label>
    <input type="email" id="email" required>
  </div>
  <div class="input-group">
    <label for="password">Password</label>
    <input type="password" id="password" required>
  </div>
  <div class="actions">
    <div class="remember-me">
      <input type="checkbox" id="remember-me">
      <label for="remember-me">Remember me</label>
    </div>
    <button onclick="login()">LOGIN</button>
    <a href="#">Forgot Password?</a>
  </div>
</div>

<script>
  function login() {
  var email = document.getElementById('email').value;
  var password = document.getElementById('password').value;

  if (email === '' || password === '') {
    alert('Please enter both email and password');
  } else {
    // Define the payload
    const data = { email: email, password: password };

    // Use fetch API to send the request
    fetch('http://localhost:8080/', {
      method: 'POST', // or 'PUT'
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data),
    })
    .then(response => response.json()) // Assuming the server responds with JSON
    .then(data => {
      console.log('Success:', data); // Process success response
      // You can redirect the user or perform other actions based on the response
      // For example, if you receive a token, you might want to store it for future requests
    })
    .catch((error) => {
      console.error('Error:', error); // Handle any errors
    });
  }
}
</script>

</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Page</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to right, #9575cd, #ff5252);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .login-container {
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    width: 300px;
  }

  .login-container h2 {
    text-align: center;
    margin-bottom: 2rem;
  }

  .input-group {
    margin-bottom: 1rem;
  }

  .input-group label {
    display: block;
    margin-bottom: .5rem;
  }

  .input-group input {
    width: 100%;
    padding: .5rem;
    border: 1px solid #ccc;
    border-radius: 5px;
  }

  .actions {
    margin-top: 1rem;
  }

  .actions button, .toggle-form {
    width: 100%;
    padding: .7rem;
    border: none;
    background: #9575cd;
    color: white;
    border-radius: 5px;
    cursor: pointer;
  }

  .actions button:hover, .toggle-form:hover {
    background: #7e57c2;
  }

  .toggle-form {
    margin-top: 1rem;
  }

  .actions .remember-me {
    display: flex;
    align-items: center;
    margin-bottom: .5rem;
  }

  .actions input[type="checkbox"] {
    margin-right: .5rem;
  }

  .actions a {
    display: block;
    text-align: center;
    margin-top: 1rem;
  }
</style>
</head>
<body>

<div class="login-container" id="form-container">
  <!-- Dynamic form content will be loaded here -->
</div>

<script>

document.addEventListener('DOMContentLoaded', function() {
  //if url is /login then load login form
  console.log(window.location.pathname);
  if (window.location.pathname === '/login') {
    loadLoginForm();
  } else {
    //if url is /signup then load signup form
    loadSignupForm();
  }
  
});

function loadLoginForm() {
  window.history.pushState({ page: "login" }, "Login", "/login");
  const formContainer = document.getElementById('form-container');
  formContainer.innerHTML = `
    <div class="input-group">
      <label for="email">Email ID</label>
      <input type="email" id="email" required>
    </div>
    <div class="input-group">
      <label for="password">Password</label>
      <input type="password" id="password" required>
    </div>
    <div class="actions">
      <div class="remember-me">
        <input type="checkbox" id="remember-me">
        <label for="remember-me">Remember me</label>
      </div>
      <button onclick="login()">LOGIN</button>
      <a href="#">Forgot Password?</a>
    </div>
    <button class="toggle-form" onclick="loadSignupForm()">Sign Up</button>
  `;
  
}

function loadSignupForm() {
  window.history.pushState({ page: "signup" }, "signup", "/");
  const formContainer = document.getElementById('form-container');
  formContainer.innerHTML = `
    <div class="input-group">
      <label for="username">Username</label>
      <input type="text" id="username" required>
    </div>
    <div class="input-group">
      <label for="email">Email ID</label>
      <input type="email" id="email" required>
    </div>
    <div class="input-group">
      <label for="password">Password</label>
      <input type="password" id="password" required>
    </div>
    <div class="actions">
      <button onclick="signup()">SIGN UP</button>
    </div>
    <button class="toggle-form" onclick="loadLoginForm()">Login</button>
  `;
}

function login() {
  // Your existing login function
  var email = document.getElementById('email').value;
  var password = document.getElementById('password').value;

  // Add logic to handle login
  if (email === '' || password === '') {
    alert('Please enter both email and password');
  } else {
    // Define the payload
    const data = { email: email, password: password };

    // Use fetch API to send the request
    fetch('http://localhost:8080/login', {
      method: 'POST', // or 'PUT'
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data),
    })
    .then(response => response.json()) // Assuming the server responds with JSON
    .then(data => {
      console.log('Success:', data); // Process success response
      // You can redirect the user or perform other actions based on the response
      // For example, if you receive a token, you might want to store it for future requests
    })
    .catch((error) => {
      console.error('Error:', error); // Handle any errors
    });
  }
  
}
function showPopup(message, clearFields, success) {
  const popup = document.createElement('div');
  popup.innerHTML = `
    <div class="popup-container" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center;">
      <div class="popup" style="background: white; padding: 2rem; border-radius: 10px; text-align: center;">
        <p>${message}</p>
        <button id="popup-ok">OK</button>
      </div>
    </div>
  `;
  document.body.appendChild(popup);

  document.getElementById('popup-ok').onclick = function() {
    popup.remove();
    if (clearFields) {
      document.getElementById('username').value = '';
      document.getElementById('email').value = '';
      document.getElementById('password').value = '';
    }
    if (success) {
      loadLoginForm();
    }
  }
}
function signup() {
  var username = document.getElementById('username').value;
  var email = document.getElementById('email').value;
  var password = document.getElementById('password').value;

  if (username === '' || email === '' || password === '') {
    showPopup('Please enter all fields', false);
  } else {
    const data = { username: username, email: email, password: password };

    fetch('http://localhost:8080/signup', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data),
    })
    .then(response => response.json())
    .then(data => {
      if (data.message === "Account already exists") {
        username.value = '';
        email.value = '';
        password.value = '';
        // Show popup for already existing user without redirecting
        showPopup("An account with this email already exists.", true, false);
      } else {
        // Show popup for successful account creation and redirect to login
        showPopup('Successfully created account', false, true);
      }
    })
    .catch((error) => {
      console.error('Error:', error);
      showPopup('An error occurred. Please try again.', false, false);
    });
  }
}

</script>

</body>
</html>
